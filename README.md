## Github    https://github.com/prbinfo/codetest_safe

## Requirement description:
  
The code will process an input file.

Each line in the input file will start with a command. There are two possible commands.

The first command is Driver, which will register a new Driver in the app. Example:

'Driver Dan'

The second command is Trip, which will record a trip attributed to a driver. The line will be space delimited with the following fields: the command (Trip), driver name, start time, stop time, miles driven. Times will be given in the format of hours:minutes. We'll use a 24-hour clock and will assume that drivers never drive past midnight (the start time will always be before the end time). Example:

'Trip Dan 07:15 07:45 17.3'

Discard any trips that average a speed of less than 5 mph or greater than 100 mph.

Generate a report containing each driver with total miles driven and average speed. Sort the output by most miles driven to least. Round miles and miles per hour to the nearest integer.

Example input:

Driver Dan
Driver Alex
Driver Bob
Trip Dan 07:15 07:45 17.3
Trip Dan 06:12 06:32 21.8
Trip Alex 12:01 13:16 42.0


Expected output:

Alex: 42 miles @ 34 mph
Dan: 39 miles @ 47 mph
Bob: 0 miles

## GitHub link: 


## Getting started 

This project contains both Frontend and Backend. 

# Frondend developed with angular (see github link for UI prject)

# Backend developed with ASP.NET Core where you see five projects TripService(controller), ExternalService Data access, Model, and unit test projects.

## Implementation details

#Backend: 

-Created three models Driver {Name, List<Trip>} , Trip {StartTime, EndTime, Miles, SpeedMPH }, DriverReport {Name, Total miles, AverageSpeed} (Drivers.Model.csproj)

-Created Microservice (TripController)  with two aciton methods Get and Post method(TripService.csproj).

-Post method will invoke the another method FileUpload in DriverReportService.cs and it will upload the input file into respective project folder 
 (configured the file path in appsettings.json).

-Get method will invoke GetDriverReports method in DriverReportService.cs which reads trip data from the stored input file and calculate the average speed and total   miles driven by each driver and finally returns collection of DriverReport model.

-Since controller should not have much logic, I created seperate project for business logic (ExternalServices.DataAccess.csproj)

-Created two unit test projects to test the controllers and services.

-Run the unit test cases in Test explorer in visual studio 2019.

## Frontend

- Created angular components and services to invoke ASP.NET Core Microservices using HttpClient Service and display the response in HTML.

- You will also see lot of biolerplate code generated by Angular CLI.


##Software setup:

- To run the project in local  you need to have visual studio code and visual studio tools (download from below links)
- visual studio : https://visualstudio.microsoft.com/downloads/
- Visual studio code: https://code.visualstudio.com/download
- you need to install .net core sdk based on operating system that you are using.
- Download .net core sdk using https://dotnet.microsoft.com/download/dotnet/3.1
- Download and install node.js
- Node.js - https://nodejs.org/en/download/
- install Typescript using command npm install typescript --save-dev
- install angular cli (https://www.npmjs.com/package/@angular/cli) using commands npm install -g @angular/cli (globally) or npm install @angular/cli (locally)
 
## Execution

  #Backend
   
 - Download backend code from github link and open the solution file in visual studio and build the solution.
 - Click on IIS express option in visual studio to run the project which will open the swagger in the browser ( you test microservices using swagger and post man also)
  
  #Fronend

- Download the project code from the github link.
- Open the frondend code in visual studio code and open terminal and run npm install which will install required packages given in package.json under node_modules.
- Run ng serve -o which will also build project and open the browser at the same time (you can see output).
- You can also use ng build command to build the project.
- Make sure your microservice is in running mode while you are testing with frondend




